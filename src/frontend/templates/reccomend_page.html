{% extends 'base.html' %} <!-- Based off the base.html (where skeleton html is like navi bar)-->



{% block head %}
<title>SongSurf Reccomendations</title>
<link rel="stylesheet" href="{{ url_for('static', filename='css/reccomend_page.css') }}">
{% endblock %}

{% block body %} 

<!-- <h1>SongSurf</h1> -->
<div style="text-align: center;">
  <a href="{{ url_for('home_page') }}" ><img src='static/css/images/SongSurf Logo.png' style="width:250px; height:100px;"></a>
</div>
<p> SongSurf allows you to discover new music that
  you'll love through an informative, attractive, and intuitive website. 
  Input your favorite artists, albums, or songs and receive recommendations based on what you love.
  SongSurf also allows you to track your favorite discoveries for future use   .</p>

<!-- Button to open the favorites tab -->
<button class="favorites-button">Favorites</button>

<!-- The sliding favorites tab -->
<div class="favorites-tab">
  <div class="close-button">&times;</div>
  <h3>Your Favorites</h3>
  <!-- Add your favorite items here -->
</div>
  
<div class="content">
  <h2>Here are some {{ user_choice }} based off what you like:</h2>
  <div class="recommendations">
    {% for rec in recommendations %}
    <div class="recommendation-container">
      <p>{{ user_choice }} - {{ rec.name }}</p>
      {% if rec is iterable and not rec|string %}
        {% for r in rec %}
          <div class="reccomendation_section">
            <img src={{rec.image}} alt="Image">
            {% if rec.description|length > 200 %}
              <p class="description">{{ rec.description[:200] }}...</p>
            {% else %}
              <p class="description">{{ rec.description }}</p>
            {% endif %}
          </div>
        {% endfor %}
      {% else %}
        <div class="reccomendation_section">
          <img src={{rec.image}} alt="Image">
            {% if rec.description %}
              {% if rec.description|length > 200 %}
                <p class="description">{{ rec.description[:200] }}...</p>
              {% else %}
                <p class="description">{{ rec.description }}</p>
              {% endif %}
            {% else %}
              <p class="description">No description available!</p>
            {% endif %}
        </div>
      {% endif %}
      <div class="like-dislike-container">
        <div class="like-dislike">
          <button class="like-button">Like</button>
          <button class="dislike-button">Dislike</button>
        </div>
      </div>
    </div>
{% endfor %}
</div>
    
<div style="text-align: center;">
  <a href="{{ url_for('search_page') }}" ><img src='static/css/images/backarrow.png' style="width:75px; height:45px;"></a>
</div>

<script>
  const favoritesButton = document.querySelector('.favorites-button');
  const favoritesTab = document.querySelector('.favorites-tab');
  const closeButton = document.querySelector('.favorites-tab .close-button');
  const overlay = document.createElement('div');
  overlay.classList.add('overlay');
  document.body.appendChild(overlay);

  favoritesButton.addEventListener('click', () => {
      favoritesTab.classList.add('open');
      document.body.style.overflow = 'hidden'; // Hide the scrollbar when the tab is open
      overlay.style.display = 'block';
  });

  closeButton.addEventListener('click', () => {
      favoritesTab.classList.remove('open');
      document.body.style.overflow = 'auto'; // Show the scrollbar when the tab is closed
      overlay.style.display = 'none';
  });
</script>

{% endblock %}
